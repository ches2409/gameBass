{% macro render_equipo_modal(modal_id, form_action, submit_text, estados, usuarios, is_create=False) %}
<!-- Fondo del Modal (Backdrop) -->
<div class="modal-overlay" id="{{ modal_id }}" style="display: none;">

  <!-- Contenedor del Modal -->
  <div class="modal-container">

    <!-- Elementos Decorativos de Esquina -->
    <div class="corner-bracket tl"></div>
    <div class="corner-bracket tr"></div>
    <div class="corner-bracket bl"></div>
    <div class="corner-bracket br"></div>

    <!-- Escáner Láser Decorativo (Animado) -->
    <div class="modal-laser-line"></div>

    <!-- Contenido del Formulario -->
    <div class="modal-content">

      <header class="modal-header">
        <div class="header-main">
          <span class="status-indicator"></span>
          <h2>INYECTAR_NIVEL_ACCESO</h2>
        </div>
        <p class="header-subtitle">INYECTANDO_CAPACIDADES_NEURALES_v4.2</p>
      </header>

      <form class="injection-form" id="form-{{ modal_id }}" action="{{ form_action }}" method="POST">

        <!-- Campo: Nombre de Juego -->
        <div class="input-group">
          <label><span class="label-icon">shield</span> SQUAD_DESIGNATION [NOMBRE_DE_EQUIPO]</label>
          <input type="text" name="nombre_equipo" id="{{ modal_id }}-nombre" {% if is_create %}placeholder="Nombre del equipo"{% endif %} required>
          <div class="input-focus-line"></div>
        </div>


        <!-- campo: Lema -->
        <div class="input-group">
          <label><span class="label-icon">description</span> NEURAL_SIGNATURE [LEMA_DE_EQUIPO]</label>
          <!-- Agregamos name y readonly -->
          <textarea name="lema_equipo" id="{{ modal_id }}-lema" {% if is_create %}placeholder="Lema del equipo"{% endif %}></textarea>
        </div>




        <div class="data-group">
            <!-- campo: numero maximo de miembros -->
        <div class="input-group">
            <label><span class="label-icon">shield</span> SQUAD_POPULATION</label>
            <input type="number" name="maximo_miembros" id="{{ modal_id }}-maximo_miembros" {% if is_create %}placeholder="maximo de mimebros del equipo"{% endif %} required>
            <div class="input-focus-line"></div>
        </div>


        <!-- Select: seleccionar el estado del equipo (traído de enum) -->
        <div class="input-group">
          <label><span class="label-icon">fingerprint</span> ESTADO_ACTUAL</label>
          <select name="estado_equipo" id="{{ modal_id }}-estado" class="estado_equipo">
            {% for estado in estados %}
            <option value="{{ estado.name }}">{{ estado.value | upper }}</option>
            {% endfor %}
          </select>
        <div class="input-focus-line"></div>
        </div>
        </div>

        <!-- Select: seleccionar el comandante del equipo (traído de usuarios) -->
        <div class="input-group">
          <label><span class="label-icon">fingerprint</span> COMANDER</label>
          <select name="id_comandante" id="{{ modal_id }}-comandante" class="comandante_equipo">
            {% for usuario in usuarios %}
            <option value="{{ usuario.id_usuario }}">{{ usuario.alias_usuario | upper }} [{{ usuario.jerarquia.nombre_jerarquia | upper }}]</option>
            {% endfor %}
          </select>
          <div class="input-focus-line"></div>
        </div>

        <!-- Campo: Color Identificador -->
        <div class="input-group">
          <label><span class="label-icon">palette</span> FIRMA_CROMATICA</label>
          <input type="color" name="color_equipo" id="{{ modal_id }}-color" value="#A3FF00" class="color-picker">
        </div>

        <!-- Botones de Acción -->
        <div class="modal-actions">
          <button type="button" class="btn-cancel" onclick="toggleModal('{{ modal_id }}')">ABORTAR_PROCESO</button>
          <button type="submit" class="btn-submit">
            <span class="btn-glow"></span>
            {{ submit_text }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endmacro %}