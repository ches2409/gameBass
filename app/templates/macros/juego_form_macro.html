{% macro render_juego_modal(modal_id, form_action, submit_text, estados, is_create=False) %}
<!-- Fondo del Modal (Backdrop) -->
<div class="modal-overlay" id="{{ modal_id }}" style="display: none;">

  <!-- Contenedor del Modal -->
  <div class="modal-container">

    <!-- Elementos Decorativos de Esquina -->
    <div class="corner-bracket tl"></div>
    <div class="corner-bracket tr"></div>
    <div class="corner-bracket bl"></div>
    <div class="corner-bracket br"></div>

    <!-- Escáner Láser Decorativo (Animado) -->
    <div class="modal-laser-line"></div>

    <!-- Contenido del Formulario -->
    <div class="modal-content">

      <header class="modal-header">
        <div class="header-main">
          <span class="status-indicator"></span>
          <h2>INYECTAR_NIVEL_ACCESO</h2>
        </div>
        <p class="header-subtitle">INYECTANDO_CAPACIDADES_NEURALES_v4.2</p>
      </header>

      <form class="injection-form" id="form-{{ modal_id }}" action="{{ form_action }}" method="POST">

        <!-- Campo: Nombre de Juego -->
        <div class="input-group">
          <label><span class="label-icon">shield</span> NOMBRE_SOFTWARE</label>
          <input type="text" name="nombre_de_juego" id="{{ modal_id }}-nombre" {% if is_create %}placeholder="Ej: Valorant"{% endif %} required>
          <div class="input-focus-line"></div>
        </div>

        <!-- Campo: Motor de Juego-->
        <div class="input-group">
          <label><span class="label-icon">category</span> MOTOR_ENGINE</label>
          <input type="text" name="motor_de_juego" id="{{ modal_id }}-motor" {% if is_create %}placeholder="Ej: Riot_Kernel"{% endif %} required>
          <div class="input-focus-line"></div>
        </div>

        <!-- Campo: Genero del juego -->
        <div class="input-group">
          <label><span class="label-icon">lock_open</span> GENERO_ENCLAVE_NEURAL</label>
          <input type="text" name="genero_de_juego" id="{{ modal_id }}-genero" {% if is_create %}placeholder="TACTICAL_FPS"{% endif %} required>
          <div class="input-focus-line"></div>
        </div>

        <!-- Select: seleccionar el estado del juego (traido del enum) -->
        <div class="input-group">
          <label><span class="label-icon">fingerprint</span> ESTADO_ACTUAL</label>
          <select name="estado_de_juego" id="{{ modal_id }}-estado" class="estado_juego">
            {% for estado in estados %}
            <option value="{{ estado.name }}">{{ estado.value | upper }}</option>
            {% endfor %}
          </select>
        </div>

        <!-- Campo: Color Identificador -->
        <div class="input-group">
          <label><span class="label-icon">palette</span> FIRMA_CROMATICA</label>
          <input type="color" name="color_de_juego" id="{{ modal_id }}-color" value="#A3FF00" class="color-picker">
        </div>

        <!-- Botones de Acción -->
        <div class="modal-actions">
          <button type="button" class="btn-cancel" onclick="toggleModal('{{ modal_id }}')">ABORTAR_PROCESO</button>
          <button type="submit" class="btn-submit">
            <span class="btn-glow"></span>
            {{ submit_text }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endmacro %}